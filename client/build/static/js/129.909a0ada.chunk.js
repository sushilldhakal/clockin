"use strict";(self.webpackChunkselfie=self.webpackChunkselfie||[]).push([[129],{6129:function(e,t,s){s.r(t),s.d(t,{default:function(){return w}});var i=s(5671),a=s(3144),n=s(136),l=s(8557),c=s(2791),o=s(885),r=s(97),d=s.n(r),h=s(184),m={width:400,height:375,facingMode:"user"},u=function(){var e=(0,c.useState)(""),t=(0,o.Z)(e,2),s=t[0],i=t[1],a=c.useRef(null),n=c.useCallback((function(){var e=a.current.getScreenshot();i(e)}));return(0,h.jsxs)("div",{className:"webcam-container",children:[(0,h.jsx)("div",{className:"webcam-img",children:""===s?(0,h.jsx)(d(),{audio:!1,height:400,ref:a,screenshotFormat:"image/jpeg",width:375,videoConstraints:m}):(0,h.jsx)("img",{id:"screen-image",src:s})}),(0,h.jsx)("div",{children:""!==s?(0,h.jsx)("button",{onClick:function(e){e.preventDefault(),i("")},className:"webcam-btn capture",children:"Retake Image"}):(0,h.jsx)("button",{onClick:function(e){e.preventDefault(),n()},className:"webcam-btn capture",id:"webcam-btn",children:"Capture"})})]})},v=s(4569),g=s.n(v),x=s(2062),b=s.n(x),p=s(2426),j=s.n(p),f=s(2594),N=s(4135),k=s(1734),y=s(7043);setInterval((function(){var e,t=new Date;e=t.toDateString()+" "+t.toLocaleTimeString();var s=j()(e).format("hh:mm:ss A");document.getElementById("todaysDate")&&(document.getElementById("todaysDate").innerHTML=s)}),1e3);var C=function(e){(0,n.Z)(s,e);var t=(0,l.Z)(s);function s(){var e;(0,i.Z)(this,s);for(var a=arguments.length,n=new Array(a),l=0;l<a;l++)n[l]=arguments[l];return(e=t.call.apply(t,[this].concat(n))).state={currentTime:j()().format("LT"),name:"",lat:"",lng:"",user:{name:""},timesheets:[],timesheetLoaded:!1,isActive:"",birthday:!1,className:"hide tooltip",class:"",value:"idle"},e.onClick=function(t){document.getElementById("webcam-btn").click(),e.setState({value:"loading"}),setTimeout((function(){g().post(y.UW+"clock/"+t,{lat:e.state.lat.toString(),lng:e.state.lng.toString(),pin:localStorage.getItem("pin"),image:document.getElementById("screen-image").src}).then((function(t){e.setState({value:"success"}),setTimeout((function(){localStorage.clear(),e.props.history.push("/")}),1e3)})).catch((function(t){b()("Error: Something went wrong."),e.setState({value:"error"})}))}),100)},e}return(0,a.Z)(s,[{key:"componentDidMount",value:function(){var e=this;g().get(y.UW+"get-timesheets/"+localStorage.getItem("pin")).then((function(t){e.setState({timesheetLoaded:!0,timesheets:t.data.timesheets,user:t.data.user,birthday:j()(t.data.user.dob).format("MM-DD")===j()(new Date).format("MM-DD")}),navigator.geolocation.getCurrentPosition((function(t){e.setState({lat:t.coords.latitude,lng:t.coords.longitude})}))})),setTimeout((function(){localStorage.removeItem("pin"),e.props.history.push("/")}),14e3)}},{key:"render",value:function(){var e=this;null===localStorage.getItem("pin")&&this.props.history.push("/");var t="";return 0===this.state.timesheets.length?t="start":[1,2].includes(this.state.timesheets.length)?t="break":3===this.state.timesheets.length&&(t="end"),console.log(this.state.timesheets.length,t),console.log(this.state.timesheets),(0,h.jsx)("div",{className:"home-container",children:(0,h.jsx)("div",{className:"container-fluid",children:(0,h.jsxs)("div",{className:"text white-text",children:[(0,h.jsx)("h2",{id:"todaysDate",children:" "}),(0,h.jsx)("div",{className:"big-screen",children:(0,h.jsxs)("div",{className:"row",children:[(0,h.jsx)("div",{className:"col-lg-6 col-sm-12",children:(0,h.jsxs)("div",{className:"video-wrapper",children:[(0,h.jsxs)("div",{className:"user-detail-login",children:[(0,h.jsx)("h4",{className:"name",children:this.state.user.name}),(0,h.jsx)("h4",{className:"role",children:this.state.user.role})]}),(0,h.jsx)("div",{className:"user-home-clocksheet",children:this.state.timesheets.map((function(e,t){return(0,h.jsxs)("div",{children:[(0,h.jsx)("span",{className:"timesheet-type-time ".concat(e.type),children:j()(e.time).format("LT")},t),(0,h.jsxs)("span",{className:"timesheet-type clock-".concat(e.type),children:["in"==e.type?"Clocked In":null,"break"==e.type?"On Break":null,"endBreak"==e.type?"Break End":null,"out"==e.type?"Clocked Out":null]})]},t)}))}),(0,h.jsx)(u,{id:"webimage"})]})}),(0,h.jsx)("div",{className:"col-lg-6 col-sm-12",children:(0,h.jsx)("div",{className:"record-slider ",children:this.state.timesheetLoaded&&(0,h.jsxs)(N.Z,{defaultActiveKey:this.state.timesheetLoaded?t:void 0,children:[(0,h.jsx)(k.Z,{eventKey:"start",title:"START",disabled:!this.state.timesheetLoaded||this.state.timesheets.length>0,tabClassName:"animated fadeIn",children:(0,h.jsx)("div",{className:"tooltip-btn btn-outline-success left",children:(0,h.jsx)(f.Z,{buttonState:this.state.value,onClick:function(){return e.onClick("in")},idleText:"CLOCK IN",rounded:!0,size:"large",block:!0,height:"60px",style:{backgroundColor:"#1a8754"}})})}),(0,h.jsxs)(k.Z,{eventKey:"break",title:2==this.state.timesheets.length?"END BREAK":"BREAK",tabClassName:"animated fadeIn",disabled:!this.state.timesheetLoaded||this.state.timesheets.length>2,children:[(0,h.jsx)("div",{className:"tooltip-btn btn-outline-warning middle ".concat(1==this.state.timesheets.length||0==this.state.timesheets.length?"not-active":"tooltip"),children:(0,h.jsx)(f.Z,{buttonState:this.state.value,onClick:function(){return e.onClick("break")},idleText:"START BREAK",rounded:!0,size:"large",block:!0,height:"60px",style:{backgroundColor:"#ff9503"}})}),(0,h.jsx)("div",{className:"tooltip-btn btn-outline-warning middle ".concat(2==this.state.timesheets.length?"not-active":"tooltip"),children:(0,h.jsx)(f.Z,{buttonState:this.state.value,onClick:function(){return e.onClick("endBreak")},idleText:"END BREAK",rounded:!0,size:"large",block:!0,height:"60px",style:{backgroundColor:"#ff9503"}})})]}),(0,h.jsx)(k.Z,{eventKey:"end",title:"FINISH",disabled:!this.state.timesheetLoaded||this.state.timesheets.length>3,tabClassName:"animated fadeIn",children:(0,h.jsx)("div",{className:"awesome-btn tooltip-btn btn-outline-danger right "+this.state.class,children:(0,h.jsx)(f.Z,{buttonState:this.state.value,onClick:function(){return e.onClick("out")},idleText:"CLOCK OUT",rounded:!0,size:"large",block:!0,height:"60px",style:{backgroundColor:"#eb5c59"}})})})]})})}),this.state.birthday&&(0,h.jsxs)("div",{className:"col-sm-12",children:[(0,h.jsxs)("div",{className:"annimation-rib",children:[(0,h.jsx)("div",{className:"annimation-rib-piece"}),(0,h.jsx)("div",{className:"annimation-rib-piece"}),(0,h.jsx)("div",{className:"annimation-rib-piece"}),(0,h.jsx)("div",{className:"annimation-rib-piece"}),(0,h.jsx)("div",{className:"annimation-rib-piece"}),(0,h.jsx)("div",{className:"annimation-rib-piece"}),(0,h.jsx)("div",{className:"annimation-rib-piece"}),(0,h.jsx)("div",{className:"annimation-rib-piece"}),(0,h.jsx)("div",{className:"annimation-rib-piece"}),(0,h.jsx)("div",{className:"annimation-rib-piece"}),(0,h.jsx)("div",{className:"annimation-rib-piece"}),(0,h.jsx)("div",{className:"annimation-rib-piece"}),(0,h.jsx)("div",{className:"annimation-rib-piece"})]}),(0,h.jsxs)("div",{className:"fireworks",children:[(0,h.jsx)("div",{className:"wish",children:(0,h.jsx)("center",{children:(0,h.jsxs)("h2",{children:["Hope all your birthday wishes come true. Happy Birthday ",this.state.user.name]})})}),(0,h.jsxs)("div",{className:"pyro",children:[(0,h.jsx)("div",{className:"before"}),(0,h.jsx)("div",{className:"after"}),(0,h.jsx)("div",{className:"before1"}),(0,h.jsx)("div",{className:"after1"})]})]})]})]})})]})})})}}]),s}(c.Component),w=C}}]);
//# sourceMappingURL=129.909a0ada.chunk.js.map