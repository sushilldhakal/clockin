(self.webpackChunkselfie=self.webpackChunkselfie||[]).push([[462],{2210:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return D}});var n=a(1413),s=a(4942),r=a(5671),i=a(3144),l=a(136),o=a(8557),c=a(2791),d=a(2132),m=a(2677),u=a(3360),h=a(3513),p=a(1820),f=a(5181),x=(a(5106),a(4569)),j=a.n(x),g=a(2062),v=a.n(g),b=a(7043),N=a(885),k=a(5630),Z=a(9403),w=a.n(Z),_=a(184),y=function(e){var t=e.user,a=e.role,s=e.location,r=e.employer,i=e.onUpdate,l=(0,c.useState)(t),o=(0,N.Z)(l,2),d=o[0],u=o[1];return(0,_.jsx)("form",{className:"add-employee-form",children:(0,_.jsx)("div",{className:"container-add-employee",children:(0,_.jsxs)(m.Z,{sm:12,children:[(0,_.jsxs)("div",{className:"form-row mb-4",children:[(0,_.jsxs)(k.Z.Group,{as:m.Z,controlId:"formGridName",children:[(0,_.jsx)(k.Z.Label,{children:"Full Name"}),(0,_.jsx)("input",{id:"formGridName",type:"text",name:"name",onChange:function(e){return u((0,n.Z)((0,n.Z)({},d),{},{name:e.target.value}))},value:d.name,className:"form-control",placeholder:"Full Name"})]}),(0,_.jsxs)(k.Z.Group,{as:m.Z,controlId:"formGridPin",id:"custom-pinGroup",children:[(0,_.jsx)(k.Z.Label,{children:"PIN"}),(0,_.jsx)("input",{id:"formGridPin",type:"number",name:"pin",onChange:function(e){return u((0,n.Z)((0,n.Z)({},d),{},{pin:e.target.value}))},value:d.pin,className:"form-control",placeholder:"Pin",maxLength:"4",minLength:"4"})]})]}),(0,_.jsxs)("div",{className:"form-row mb-4",children:[(0,_.jsxs)(k.Z.Group,{as:m.Z,controlId:"formGridRole",children:[(0,_.jsx)(k.Z.Label,{children:"Select Role"}),(0,_.jsxs)(k.Z.Control,{"aria-label":"Default select example",as:"select",value:d.role,onChange:function(e){return u((0,n.Z)((0,n.Z)({},d),{},{role:e.target.value}))},children:[(0,_.jsx)("option",{children:"Select Role"}),a.map((function(e){return(0,_.jsx)("option",{value:e.name,children:e.name},e._id)}))]})]}),(0,_.jsxs)(k.Z.Group,{as:m.Z,controlId:"formGridHire",children:[(0,_.jsx)(k.Z.Label,{children:"Select Employer"}),(0,_.jsxs)(k.Z.Control,{"aria-label":"Default select example",as:"select",value:d.hire,onChange:function(e){return u((0,n.Z)((0,n.Z)({},d),{},{hire:e.target.value}))},children:[(0,_.jsx)("option",{children:"Select Employer"}),r.map((function(e){return(0,_.jsx)("option",{value:e.name,children:e.name},e._id)}))]})]}),(0,_.jsxs)(k.Z.Group,{as:m.Z,controlId:"formGridSite",children:[(0,_.jsx)(k.Z.Label,{children:"Select Job Location"}),(0,_.jsxs)(k.Z.Control,{"aria-label":"Default select example",as:"select",value:d.site,onChange:function(e){return u((0,n.Z)((0,n.Z)({},d),{},{site:e.target.value}))},children:[(0,_.jsx)("option",{children:"Select Location"}),s.map((function(e){return(0,_.jsx)("option",{value:e.name,children:e.name},e._id)}))]})]})]}),(0,_.jsxs)("div",{className:"form-row mb-4",children:[(0,_.jsxs)(k.Z.Group,{as:m.Z,controlId:"formGridEmail",children:[(0,_.jsx)(k.Z.Label,{children:"Email"}),(0,_.jsx)("input",{id:"formGridEmail",type:"email",name:"email",onChange:function(e){return u((0,n.Z)((0,n.Z)({},d),{},{email:e.target.value}))},value:d.email,className:"form-control",placeholder:"Email"})]}),(0,_.jsxs)(k.Z.Group,{as:m.Z,controlId:"formGridPhone",children:[(0,_.jsx)(k.Z.Label,{children:"Phone Number"}),(0,_.jsx)("input",{id:"formGridPhone",type:"number",name:"phone",onChange:function(e){return u((0,n.Z)((0,n.Z)({},d),{},{phone:e.target.value}))},value:d.phone,className:"form-control",placeholder:"Phone Number"})]}),(0,_.jsxs)(k.Z.Group,{as:m.Z,controlId:"formGridDob",children:[(0,_.jsx)(k.Z.Label,{children:"Date Of Birth"}),(0,_.jsx)("input",{id:"formGridDob",type:"date",name:"dob",onChange:function(e){return u((0,n.Z)((0,n.Z)({},d),{},{dob:e.target.value}))},value:d.dob,className:"form-control",placeholder:"DOB"})]})]}),(0,_.jsxs)("div",{className:"form-row mb-4",children:[(0,_.jsxs)(k.Z.Group,{as:m.Z,controlId:"formGridComment",children:[(0,_.jsx)(k.Z.Label,{children:"Comment"}),(0,_.jsx)("textarea",{id:"formGridComment",type:"textarea",name:"comment",onChange:function(e){return u((0,n.Z)((0,n.Z)({},d),{},{comment:e.target.value}))},value:d.comment,className:"form-control",placeholder:"Comment"})]}),(0,_.jsxs)(k.Z.Group,{as:m.Z,children:[(0,_.jsx)(k.Z.Label,{children:"Staff Image"}),(0,_.jsx)("img",{className:"img img-responsive img-fixed",src:d.img}),(0,_.jsx)("div",{children:(0,_.jsx)(w(),{type:"file",multiple:!1,onDone:function(e){var t=e.base64;u((0,n.Z)((0,n.Z)({},d),{},{img:t})),console.log(t)},value:d.img,onChange:function(e){return u((0,n.Z)((0,n.Z)({},d),{},{img:e.target.value}))}})})]})]}),(0,_.jsx)("div",{className:"form-row mb-4",children:(0,_.jsx)(k.Z.Group,{as:m.Z,controlId:"formGridDob",children:(0,_.jsx)("a",{className:"btn btn-primary",href:"#",onClick:function(){d.pin&&d.name&&d.role&&d.hire&&d.site?j().post(b.UW+"employee/update/"+d._id,d).then((function(e){v()({title:"Staff Detail Updated",text:"Staff details has been updated.",icon:"success",button:"OK"}),i()})).catch((function(e){v()({title:"Could not update",text:e.response.data.message,icon:"error",button:"OK"})})):(v()({title:"Error",text:"Please enter all the fields",icon:"error",button:"Go Back"}),console.log(d))},children:"Save Employee Details"})})})]})})})},C=a(2426),L=a.n(C),S=function(e){var t=e.data;return(0,_.jsxs)("table",{className:"inner-table",children:[(0,_.jsx)("thead",{children:(0,_.jsxs)("tr",{children:[(0,_.jsx)("th",{}),(0,_.jsx)("th",{children:(0,_.jsxs)("div",{className:"image-popover",children:[(0,_.jsx)("img",{src:t.imagein,className:"img-circle rounded-circle"}),(0,_.jsx)("img",{src:t.imagein,className:"img-circle rounded-circle show-on-popover"})]})}),(0,_.jsx)("th",{children:(0,_.jsxs)("div",{className:"image-popover",children:[(0,_.jsx)("img",{src:t.imagebreak,className:"img-circle rounded-circle"}),(0,_.jsx)("img",{src:t.imagebreak,className:"img-circle rounded-circle show-on-popover"})]})}),(0,_.jsx)("th",{children:(0,_.jsxs)("div",{className:"image-popover",children:[(0,_.jsx)("img",{src:t.imageendBreak,className:"img-circle rounded-circle"}),(0,_.jsx)("img",{src:t.imageendBreak,className:"img-circle rounded-circle show-on-popover"})]})}),(0,_.jsx)("th",{children:(0,_.jsxs)("div",{className:"image-popover",children:[(0,_.jsx)("img",{src:t.imageout,className:"img-circle rounded-circle"}),(0,_.jsx)("img",{src:t.imageout,className:"img-circle rounded-circle show-on-popover"})]})})]})}),(0,_.jsx)("tbody",{children:(0,_.jsxs)("tr",{children:[(0,_.jsx)("td",{}),(0,_.jsx)("td",{children:null!=t.wherein?(0,_.jsx)("a",{href:"https://www.google.com/maps/place/"+t.wherein,target:"_blank",children:"Location"}):(0,_.jsx)("span",{children:"No record"})}),(0,_.jsx)("td",{children:null!=t.wherebreak?(0,_.jsx)("a",{href:"https://www.google.com/maps/place/"+t.wherebreak,target:"_blank",children:"Location"}):(0,_.jsx)("span",{children:"No record"})}),(0,_.jsx)("td",{children:null!=t.whereendBreak?(0,_.jsx)("a",{href:"https://www.google.com/maps/place/"+t.whereendBreak,target:"_blank",children:"Location"}):(0,_.jsx)("span",{children:"No record"})}),(0,_.jsx)("td",{children:null!=t.whereout?(0,_.jsx)("a",{href:"https://www.google.com/maps/place/"+t.whereout,target:"_blank",children:"Location"}):(0,_.jsx)("span",{children:"No record"})}),(0,_.jsx)("td",{}),(0,_.jsx)("td",{})]})})]})},G=function(e){(0,l.Z)(a,e);var t=(0,o.Z)(a);function a(){var e;(0,r.Z)(this,a);for(var n=arguments.length,i=new Array(n),l=0;l<n;l++)i[l]=arguments[l];return(e=t.call.apply(t,[this].concat(i))).state={show:!1,timesheets:[],user:!1,role:"",location:"",employer:"",comment:"",inputValue:"",date:"",in:"",break:"",breakEnd:"",out:"",selected_row_index:0,is_action_menu_active:!1,edited:!1,loading:!0},e.handleTableInput=function(t){var a=t.target,n=a.name,r=a.value;e.setState((0,s.Z)({},n,r))},e.handleShowForm=function(){e.setState({show:!e.state.show})},e}return(0,i.Z)(a,[{key:"componentDidMount",value:function(){var e=this;j().get(b.UW+"timesheets/"+this.props.match.params.staff_id).then((function(t){e.setState({timesheets:t.data.timesheets,user:t.data.user[0],loading:!1})})).catch((function(e){console.log(e)})),this.retrieveRole=this.retrieveRole.bind(this),this.retrieveLocation=this.retrieveLocation.bind(this),this.retrieveEmployer=this.retrieveEmployer.bind(this),this.sendData=this.sendData.bind(this),this.retrieveRole(),this.retrieveLocation(),this.retrieveEmployer(),this.setState({loading:!0})}},{key:"retrieveRole",value:function(){var e=this;j().get(b.UW+"category/role").then((function(t){e.setState({categoryRole:t.data})}))}},{key:"retrieveLocation",value:function(){var e=this;j().get(b.UW+"category/location").then((function(t){e.setState({categoryLocation:t.data})}))}},{key:"retrieveEmployer",value:function(){var e=this;j().get(b.UW+"category/employer").then((function(t){e.setState({categoryEmployer:t.data})}))}},{key:"open_setting_menu",value:function(e,t){this.setState({is_action_menu_active:!this.state.is_action_menu_active,selected_row_index:t})}},{key:"sendData",value:function(e,t){var a={};this.state.in&&(a.in=this.state.in),this.state.break&&(a.break=this.state.break),this.state.breakEnd&&(a.endBreak=this.state.breakEnd),this.state.out&&(a.out=this.state.out),a.pin=e.pin,a.date=e.date,a.user_id=this.props.match.params.staff_id,j().post(b.UW+"update-timesheet",a).then((function(e){v()({title:"User time log updated",text:"User time log added Successful, please click on ok to load user time log",icon:"success"}).then((function(){window.location.reload()}))})).catch((function(e){v()(e.response.data.message)}))}},{key:"handleRemove",value:function(e,t){j().delete(b.UW+"employees/"+e).then((function(e){v()({title:"User Deleted",text:"User Deleted Sucessfull, please click on ok to go back to staff listing page",icon:"success"}).then((function(){window.location.href="/dashboard/staff"}))})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){var e=this,t=this.state.timesheets,a=this.state.user,s=(a[Object.keys(a)[1]],a[Object.keys(a)[0]]),r=[{name:"Date",selector:function(e){return e.date},sortable:!0,id:"Date",cell:function(e,t){return(0,_.jsxs)("div",{children:[(0,_.jsx)("i",{className:"far fa-calendar-alt"}),(0,_.jsx)("span",{className:"align-left pl-2",children:L()(e.date,"DD, MM, YYYY").format("ddd Do MMMM\tYYYY")})]})}},{id:"clock-in",name:"Clock In",selector:function(e){return[e.in,e.workingin]},sortable:!1,cell:function(t,a){return(0,_.jsx)("div",{className:t.workingin,children:e.state.is_action_menu_active&&e.state.selected_row_index===a?(0,_.jsxs)("div",{className:t.workingin,children:[(0,_.jsx)("i",{className:"far fa-clock"}),null==t.in?(0,_.jsx)("span",{className:"pl-1",children:"00:00 am"}):(0,_.jsx)("span",{className:"pl-1",children:L()(t.in,"hh:mm a").format("LT")}),(0,_.jsx)("input",{name:"in",type:"time",className:"custom-table-input",placeholder:"20:20:00",value:e.state.in,onChange:function(t){e.handleTableInput(t)}})]}):(0,_.jsxs)("div",{children:[(0,_.jsx)("i",{className:"far fa-clock"}),null==t.in?(0,_.jsx)("span",{className:"pl-1",children:"00:00 am"}):(0,_.jsx)("span",{className:"pl-1",children:L()(t.in,"hh:mm a").format("LT")})]})})}},{id:"Break-Start",name:"Break Start",selector:function(e){return[e.break,e.workingbreak]},sortable:!0,cell:function(t,a){return(0,_.jsx)("div",{className:t.workingbreak,children:e.state.is_action_menu_active&&e.state.selected_row_index===a?(0,_.jsxs)("div",{className:t.workingbreak,children:[(0,_.jsx)("i",{className:"far fa-clock"}),null==t.break?(0,_.jsx)("span",{className:"pl-1",children:"00:00 am"}):(0,_.jsx)("span",{className:"pl-1",children:L()(t.break,"hh:mm a").format("LT")}),(0,_.jsx)("input",{name:"break",className:"custom-table-input",type:"time",placeholder:"20:20:00",value:e.state.break,onChange:function(t){e.handleTableInput(t)}})]}):(0,_.jsxs)("div",{children:[(0,_.jsx)("i",{className:"far fa-clock"}),null==t.break?(0,_.jsx)("span",{className:"pl-1",children:"00:00 am"}):(0,_.jsx)("span",{className:"pl-1",children:L()(t.break,"hh:mm a").format("LT")})]})})}},{id:"Break-End",name:"Break End",selector:function(e){return[e.endBreak,e.workingendBreak]},sortable:!0,cell:function(t,a){return(0,_.jsx)("div",{className:t.workingendBreak,children:e.state.is_action_menu_active&&e.state.selected_row_index===a?(0,_.jsxs)("div",{children:[(0,_.jsx)("i",{className:"far fa-clock"}),null==t.endBreak?(0,_.jsx)("span",{className:"pl-1",children:"00:00 am"}):(0,_.jsx)("span",{className:"pl-1",children:L()(t.endBreak,"hh:mm a").format("LT")}),(0,_.jsx)("input",{name:"breakEnd",className:"custom-table-input",placeholder:"20:20:00",value:e.state.breakEnd,type:"time",onChange:function(t){e.handleTableInput(t)}})]}):(0,_.jsxs)("div",{children:[(0,_.jsx)("i",{className:"far fa-clock"}),null==t.endBreak?(0,_.jsx)("span",{className:"pl-1",children:"00:00 am"}):(0,_.jsx)("span",{className:"pl-1",children:L()(t.endBreak,"hh:mm a").format("LT")})]})})}},{id:"Clock-Out",name:"Clock Out",selector:function(e){return e.out},sortable:!0,cell:function(t,a){return(0,_.jsx)("div",{className:t.workingout,children:e.state.is_action_menu_active&&e.state.selected_row_index===a?(0,_.jsxs)("div",{children:[(0,_.jsx)("i",{className:"far fa-clock"}),null==t.out?(0,_.jsx)("span",{className:"pl-1",children:"00:00 am"}):(0,_.jsx)("span",{className:"pl-1",children:L()(t.out,"hh:mm a").format("LT")}),(0,_.jsx)("input",{name:"out",className:"custom-table-input",value:e.state.out,placeholder:"20:20:00",type:"time",onChange:function(t){e.handleTableInput(t)}})]}):(0,_.jsxs)("div",{children:[(0,_.jsx)("i",{className:"far fa-clock"}),null==t.out?(0,_.jsx)("span",{className:"pl-1",children:"00:00 am"}):(0,_.jsx)("span",{className:"pl-1",children:L()(t.out,"hh:mm a").format("LT")})]})})}},{id:"Break-hours",name:"Break hours",selector:function(e){return e.btotal},sortable:!0,cell:function(e){return(0,_.jsxs)("div",{children:[(0,_.jsx)("i",{className:"fas fa-hourglass-half"}),(0,_.jsx)("span",{className:"pl-1",children:e.btotal})]})}},{id:"Total-hours",name:"Total hours",selector:function(e){return e.total},sortable:!0,cell:function(e){return(0,_.jsxs)("div",{children:[(0,_.jsx)("i",{className:"fas fa-hourglass-half"}),(0,_.jsx)("span",{className:"pl-1",children:e.total})]})}},{key:"action",id:"Action",name:"Action",className:"action",cell:function(t,a){return(0,_.jsx)("div",{className:"btn btn-default ui right pointing dropdown icon ".concat(e.state.is_action_menu_active&&e.state.selected_row_index===a?"active":""),onClick:function(){return e.open_setting_menu(t,a)},children:(0,_.jsxs)("div",{className:"menu ".concat(e.state.is_action_menu_active&&e.state.selected_row_index===a?"transition visible":""),children:[(0,_.jsx)("div",{className:"btn btn-custom btn-border item item-edit",children:"Edit"}),(0,_.jsx)("div",{onClick:function(){return e.sendData(t,a)},className:"btn btn-custom btn-border item item-update",children:"Update"})]})})}}],i={columns:r,data:t};return(0,_.jsx)("div",{children:(0,_.jsxs)(d.Z,{children:[(0,_.jsxs)(d.Z.Header,{children:[(0,_.jsxs)(d.Z.Title,{as:"h5",children:[a.name," ",a.comment]}),(0,_.jsx)("div",{className:"float-right",children:(0,_.jsx)("button",{className:"btn btn-danger btn-rounded",onClick:function(t){return e.handleRemove(s,t)},children:"Delete User"})})]}),(0,_.jsxs)(d.Z.Body,{children:[this.state.user&&(0,_.jsx)(m.Z,{children:(0,_.jsx)("div",{className:"edit-employee-bottom-row clearfix",children:(0,_.jsx)(u.Z,{className:"btn btn-primary toggle-button float-start",onClick:this.handleShowForm,children:this.state.show?"Close Form":"Edit Employee Details"})})}),(0,_.jsxs)("div",{className:"row",children:[(0,_.jsx)("div",{className:"col-sm-8",children:this.state.user&&this.state.show&&(0,_.jsx)(y,{user:this.state.user,role:this.state.categoryRole,location:this.state.categoryLocation,employer:this.state.categoryEmployer,onUpdate:function(t){return e.setState({show:!1})}})}),(0,_.jsx)("div",{className:"col-sm-4",children:a.img?(0,_.jsx)("img",{src:a.img,className:"img img-responsive img-custom"}):(0,_.jsx)("span",{})})]}),(0,_.jsx)("div",{className:"single-user-table",children:(0,_.jsx)(f.Z,(0,n.Z)((0,n.Z)({print:!0,exportHeaders:!0,export:!0,filterPlaceholder:"Search"},i),{},{children:(0,_.jsx)(h.ZP,{columns:r,data:t,progressPending:this.state.loading,noHeader:!0,defaultSortField:"id",defaultSortAsc:!0,pagination:!0,highlightOnHover:!0,sortIcon:(0,_.jsx)(p.Z,{}),expandableRows:!0,paginationPerPage:"30",paginationComponentOptions:{selectAllRowsItem:!0},expandableRowsComponent:S})}))})]})]})})}}]),a}(c.Component),D=G},3881:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return n.Z}});var n=a(6608)},1820:function(e,t,a){"use strict";var n=a(4836);t.Z=void 0;var s=n(a(2791)),r=(0,n(a(4894)).default)(s.default.createElement("path",{d:"M20 12l-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8 8-8z"}),"ArrowDownward");t.Z=r},4894:function(e,t,a){"use strict";var n=a(4836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var a=r.default.memo(r.default.forwardRef((function(t,a){return r.default.createElement(i.default,(0,s.default)({ref:a},t),e)})));0;return a.muiName=i.default.muiName,a};var s=n(a(434)),r=n(a(2791)),i=n(a(3881))},434:function(e){function t(){return e.exports=t=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},e.exports.__esModule=!0,e.exports.default=e.exports,t.apply(this,arguments)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},4836:function(e){e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports}}]);
//# sourceMappingURL=462.3308397d.chunk.js.map